{"version":3,"file":"johnmakridis-ngx-image-gallery.umd.js","sources":["../../../src/projects/ngx-image-gallery/src/lib/components/ngx-image-gallery/ngx-image-gallery.component.ts","../../../src/projects/ngx-image-gallery/src/lib/directives/click-outside.directive.ts","../../../src/projects/ngx-image-gallery/src/lib/directives/mousewheel.directive.ts","../../../src/projects/ngx-image-gallery/src/lib/index.ts","../../../src/projects/ngx-image-gallery/src/public-api.ts","../../../src/projects/ngx-image-gallery/src/johnmakridis-ngx-image-gallery.ts"],"sourcesContent":["import {\n    Component,\n    OnInit,\n    HostBinding,\n    Input,\n    HostListener,\n    ElementRef,\n    Renderer2,\n    EventEmitter,\n    Output,\n    OnChanges,\n    SimpleChanges,\n    ViewChild,\n    ChangeDetectorRef\n} from '@angular/core';\n\nimport {assign, debounce} from 'lodash';\n\nimport {GALLERY_CONF, GALLERY_IMAGE} from '../../ngx-image-gallery.conf';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n// key codes to react\nconst KEY_CODES = {\n    37: 'LEFT',\n    39: 'RIGHT',\n    27: 'ESC'\n};\n\n// default gallery configuration\nconst DEFAULT_CONF: GALLERY_CONF = {\n    imageBorderRadius: '3px',\n    imageOffset: '20px',\n    imagePointer: false,\n    showDeleteControl: false,\n    showCloseControl: true,\n    showExtUrlControl: true,\n    showImageTitle: true,\n    showThumbnails: true,\n    closeOnEsc: true,\n    reactToKeyboard: true,\n    reactToMouseWheel: true,\n    reactToRightClick: false,\n    thumbnailSize: 30,\n    backdropColor: 'rgba(13,13,14,0.85)',\n    inline: false,\n    showArrows: true\n};\n\n@Component({\n    selector: 'ngx-image-gallery',\n    templateUrl: './ngx-image-gallery.component.html',\n    styleUrls: ['./ngx-image-gallery.component.scss']\n})\nexport class NgxImageGalleryComponent implements OnInit, OnChanges {\n\n    // gallery opened memory\n    @HostBinding('class.active') opened: boolean = false;\n\n    // gallery configuration\n    @Input() conf: GALLERY_CONF = {};\n\n    // gallery images\n    @Input() images: GALLERY_IMAGE[] = [];\n\n    // event emmiters\n    @Output() onOpen = new EventEmitter();\n    @Output() onClose = new EventEmitter();\n    @Output() onDelete = new EventEmitter();\n    @Output() onImageChange = new EventEmitter();\n    @Output() onImageClicked = new EventEmitter();\n    @Output() onError = new EventEmitter();\n\n    // thumbnails container\n    @ViewChild('thumbnails') thumbnailsElem: ElementRef;\n\n    /***************************************************/\n\n    // loading animation memory\n    loading: boolean = false;\n\n    // current active image index\n    activeImageIndex: number = null;\n\n    // thumbnail margin and scroll position\n    thumbnailMargin: string = '0px 8px';\n    thumbnailsScrollerLeftMargin: string = '0px';\n\n    // active image\n    get activeImage(): GALLERY_IMAGE {\n        return this.images[this.activeImageIndex];\n    }\n\n    // if gallery is on : first image\n    get onFirstImage(): boolean {\n        return this.activeImageIndex == 0;\n    }\n\n    // if gallery is on : last image\n    get onLastImage(): boolean {\n        return this.activeImageIndex == (this.images.length - 1);\n    }\n\n    // get thumbnails viewport rendering parameters\n    get thumbnailsRenderParams(): { thumbnailsInView: number, newThumbnailMargin: number, newThumbnailSize: number, thumbnailsScrollerLeftMargin: any } {\n        let thumbnailsContainerWidth = this.thumbnailsElem.nativeElement.offsetWidth;\n\n        let thumbnailMargin = 16;\n        let thumbnailSize = thumbnailMargin + this.conf.thumbnailSize;\n        let thumbnailsInView = Math.floor(thumbnailsContainerWidth / thumbnailSize);\n        let extraSpaceInThumbnailsContainer = thumbnailsContainerWidth - (thumbnailsInView * thumbnailSize);\n        let extraMargin = extraSpaceInThumbnailsContainer / thumbnailsInView;\n\n        let newThumbnailMargin = thumbnailMargin + extraMargin;\n        let newThumbnailSize = newThumbnailMargin + this.conf.thumbnailSize;\n\n        let relativePositionOfActiveImageThumbnailToScroller = thumbnailsInView - (thumbnailsInView - this.activeImageIndex);\n        let thumbnailsScrollerLeftMargin: any;\n\n        if (relativePositionOfActiveImageThumbnailToScroller > thumbnailsInView - 2) {\n            var outThumbnails = ((this.activeImageIndex + 1) - thumbnailsInView) + 1;\n\n            if (this.activeImageIndex != (this.images.length - 1)) {\n                thumbnailsScrollerLeftMargin = '-' + (newThumbnailSize * outThumbnails) + 'px';\n            }\n            else {\n                thumbnailsScrollerLeftMargin = '-' + (newThumbnailSize * (outThumbnails - 1)) + 'px';\n            }\n        } else {\n            thumbnailsScrollerLeftMargin = '0px';\n        }\n\n        return {\n            thumbnailsInView,\n            newThumbnailMargin,\n            newThumbnailSize,\n            thumbnailsScrollerLeftMargin\n        };\n    }\n\n    // set gallery configuration\n    private setGalleryConf(conf: GALLERY_CONF) {\n        this.conf = assign(DEFAULT_CONF, conf);\n    }\n\n    // load image and return promise\n    private loadImage(index: number): Promise<any> {\n        const galleryImage: GALLERY_IMAGE = this.images[index];\n\n        // check if image is cached\n        if (galleryImage._cached) {\n            return Promise.resolve(index);\n        }\n        else {\n            return new Promise((resolve, reject) => {\n                this.loading = true;\n\n                let image = new Image();\n                image.src = galleryImage.url;\n\n                image.onload = () => {\n                    this.loading = false;\n                    galleryImage._cached = true;\n                    resolve(index);\n                };\n\n                image.onerror = (error) => {\n                    this.loading = false;\n                    reject(error);\n                };\n            });\n        }\n    }\n\n    // activate image (set active image)\n    private activateImage(imageIndex: number) {\n        // prevent loading if already loading\n        if (this.loading) return false;\n\n        // emit event\n        this.onImageChange.emit(imageIndex);\n\n        this.loadImage(imageIndex)\n            .then(_imageIndex => {\n                this.activeImageIndex = _imageIndex;\n                // Trigger change detection manually to support ChangeDetectionStrategy.OnPush\n                this.cdRef.detectChanges();\n\n                // scroll thumbnails\n                setTimeout(() => {\n                    this.fitThumbnails();\n                    setTimeout(() => this.scrollThumbnails(), 300);\n                });\n            })\n            .catch(error => {\n                console.warn(error)\n                this.onError.next(error);\n            });\n    }\n\n    // adjust thumbnail margin to perfectly fit viewport\n    private fitThumbnails = debounce(() => {\n        // if thumbnails not visible, return false\n        if (this.conf.showThumbnails == false) return false;\n\n        let thumbnailParams = this.thumbnailsRenderParams;\n        this.thumbnailMargin = '0 ' + (thumbnailParams.newThumbnailMargin / 2) + 'px';\n    }, 300);\n\n    // scroll thumbnails to perfectly position active image thumbnail in viewport\n    private scrollThumbnails() {\n        // if thumbnails not visible, return false\n        if (this.conf.showThumbnails == false) return false;\n\n        let thumbnailParams = this.thumbnailsRenderParams;\n        this.thumbnailsScrollerLeftMargin = thumbnailParams.thumbnailsScrollerLeftMargin;\n    }\n\n    // debounced prev\n    private debouncedPrev = debounce(() => this.prev(), 100, {'leading': true, 'trailing': false});\n\n    // debounced next\n    private debouncedNext = debounce(() => this.next(), 100, {'leading': true, 'trailing': false});\n\n    /***************************************************/\n\n    constructor(\n        public sanitizer: DomSanitizer,\n        private galleryElem: ElementRef,\n        private renderer: Renderer2,\n        private cdRef: ChangeDetectorRef\n    ) {}\n\n    ngOnInit() {\n        // create final gallery configuration\n        this.setGalleryConf(this.conf);\n\n        // apply backdrop color\n        this.renderer.setStyle(this.galleryElem.nativeElement, 'background-color', this.conf.backdropColor);\n\n        // gallery inline class and auto open\n        if (this.conf.inline) {\n            this.renderer.addClass(this.galleryElem.nativeElement, 'inline');\n            this.open(0);\n        }\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        // when gallery configuration changes\n        if (changes.conf && changes.conf.firstChange == false) {\n            this.setGalleryConf(changes.conf.currentValue);\n\n            // apply backdrop color\n            this.renderer.setStyle(this.galleryElem.nativeElement, 'background-color', this.conf.backdropColor);\n\n            // gallery inline class and auto open\n            if ((changes.conf.previousValue.inline != true) && this.conf.inline) {\n                this.renderer.addClass(this.galleryElem.nativeElement, 'inline');\n                this.open(0);\n            }\n        }\n\n        // when gallery images changes\n        if (changes.images && changes.images.firstChange == false) {\n            this.images = changes.images.currentValue;\n\n            if (this.images.length) {\n                this.activateImage(0);\n            }\n        }\n\n    }\n\n    // keyboard event\n    @HostListener('window:keydown', ['$event'])\n    public onKeyboardInput(event: KeyboardEvent) {\n        if (this.conf.reactToKeyboard && this.opened && !this.loading) {\n            if (KEY_CODES[event.keyCode] == 'RIGHT') {\n                this.next();\n            }\n            else if (KEY_CODES[event.keyCode] == 'LEFT') {\n                this.prev();\n            }\n            else if ((KEY_CODES[event.keyCode] == 'ESC') && this.conf.closeOnEsc) {\n                this.close();\n            }\n        }\n    }\n\n    // window resize event\n    @HostListener('window:resize', ['$event'])\n    public onWindowResize(event: Event) {\n        if (this.opened && !this.loading) {\n            this.fitThumbnails();\n            setTimeout(() => this.scrollThumbnails(), 300);\n        }\n    }\n\n    /***************************************************/\n\n    // open gallery\n    open(index: number = 0) {\n        if (this.images.length) {\n            this.opened = true;\n\n            // emit event\n            this.onOpen.emit(index);\n\n            // activate image at given index\n            this.activateImage(index);\n        }\n        else {\n            console.warn('No images provided to ngx-image-gallery!');\n        }\n    }\n\n    // close gallery\n    close() {\n        this.opened = false;\n        this.activeImageIndex = 0;\n\n        // emit event\n        this.onClose.emit();\n    }\n\n    // change prev image\n    prev() {\n        if (this.onFirstImage == false) {\n            this.activateImage(this.activeImageIndex - 1);\n        }\n    }\n\n    // change next image\n    next() {\n        if (this.onLastImage == false) {\n            this.activateImage(this.activeImageIndex + 1);\n        }\n    }\n\n    // set image (activate)\n    setActiveImage(index: number) {\n        this.activateImage(index);\n    }\n\n    // delete image\n    deleteImage(index: number) {\n        this.onDelete.emit(index);\n    }\n\n    // mouse wheel up (prev image)\n    mouseWheelUp() {\n        if (this.conf.reactToMouseWheel) {\n            this.debouncedNext();\n        }\n    }\n\n    // mouse wheel down (next image)\n    mouseWheelDown() {\n        if (this.conf.reactToMouseWheel) {\n            this.debouncedPrev();\n        }\n    }\n\n    // click on image\n    clickOnImage(index: number) {\n        this.onImageClicked.emit(index);\n    }\n\n    // right click on image\n    rightClickOnImage(event: Event) {\n        event.stopPropagation();\n        return this.conf.reactToRightClick;\n    }\n\n}\n","import { Directive, ElementRef, Output, EventEmitter, HostListener } from '@angular/core';\n\n@Directive({\n  selector: '[clickOutside]'\n})\nexport class ClickOutsideDirective {\n  @Output() clickOutside: EventEmitter<any> = new EventEmitter();\n\n  constructor(private _elementRef: ElementRef) {}\n\n  @HostListener('document:click', ['$event', '$event.target'])\n  public onClick($event, targetElement) {\n    const isClickedInside = this._elementRef.nativeElement.contains(targetElement);\n    if (!isClickedInside) {\n      this.clickOutside.emit($event);\n    }\n  }\n}","import { Directive, Output, HostListener, EventEmitter } from '@angular/core';\n\n@Directive({ selector: '[mouseWheel]' })\nexport class MouseWheelDirective {\n  @Output() mouseWheelUp = new EventEmitter();\n  @Output() mouseWheelDown = new EventEmitter();\n\n  @HostListener('mousewheel', ['$event']) onMouseWheelChrome(event: any) {\n    this.mouseWheelFunc(event);\n  }\n\n  @HostListener('DOMMouseScroll', ['$event']) onMouseWheelFirefox(event: any) {\n    this.mouseWheelFunc(event);\n  }\n\n  @HostListener('onmousewheel', ['$event']) onMouseWheelIE(event: any) {\n    this.mouseWheelFunc(event);\n  }\n\n  mouseWheelFunc(event: any) {\n    var event = window.event || event; // old IE support\n    var delta = Math.max(-1, Math.min(1, (event.wheelDelta || -event.detail)));\n    if(delta > 0) {\n        this.mouseWheelUp.emit(event);\n    } else if(delta < 0) {\n        this.mouseWheelDown.emit(event);\n    }\n    // for IE\n    event.returnValue = false;\n    // for Chrome and Firefox\n    if(event.preventDefault) {\n        event.preventDefault();\n    }\n  }\n}","import {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\n\nimport {NgxImageGalleryComponent} from './components/ngx-image-gallery/ngx-image-gallery.component';\nimport {ClickOutsideDirective} from './directives/click-outside.directive';\nimport {MouseWheelDirective} from './directives/mousewheel.directive';\n\nexport * from './components/ngx-image-gallery/ngx-image-gallery.component';\nexport * from './directives/click-outside.directive';\nexport * from './directives/mousewheel.directive';\nexport * from './ngx-image-gallery.conf';\n\n@NgModule({\n    imports: [\n        CommonModule\n    ],\n    declarations: [\n        NgxImageGalleryComponent,\n        MouseWheelDirective,\n        ClickOutsideDirective\n    ],\n    exports: [\n        NgxImageGalleryComponent,\n        MouseWheelDirective,\n        ClickOutsideDirective\n    ]\n})\nexport class NgxImageGalleryModule {\n}\n","/*\n * Public API Surface of ngx-image-gallery\n */\n\nexport * from './lib/index';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["EventEmitter","debounce","assign","Component","DomSanitizer","ElementRef","Renderer2","ChangeDetectorRef","HostBinding","Input","Output","ViewChild","HostListener","Directive","NgModule","CommonModule"],"mappings":"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"}